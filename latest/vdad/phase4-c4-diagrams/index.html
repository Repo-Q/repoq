
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Revolutionary repository quality analysis with ontological intelligence" name="description"/>
<meta content="RepoQ Contributors" name="author"/>
<link href="https://repo-q.github.io/repoq/latest/vdad/phase4-c4-diagrams/" rel="canonical"/>
<link href="../phase4-architecture-overview/" rel="prev"/>
<link href="../phase4-adrs/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.22" name="generator"/>
<title>Phase 4 - C4 Diagrams - RepoQ - Semantic Meta-Quality Loop</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="amber" data-md-color-primary="deep-purple" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#vdad-phase-4-c4-architecture-diagrams">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="RepoQ - Semantic Meta-Quality Loop" class="md-header__button md-logo" data-md-component="logo" href="../.." title="RepoQ - Semantic Meta-Quality Loop">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            RepoQ - Semantic Meta-Quality Loop
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Phase 4 - C4 Diagrams
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="amber" data-md-color-media="" data-md-color-primary="deep-purple" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="amber" data-md-color-media="" data-md-color-primary="deep-purple" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/Repo-Q/repoq" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Repo-Q/repoq
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/installation/">
          
  
  
    
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../user-guide/usage/">
          
  
  
    
  
  User Guide

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../architecture/overview/">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tutorials/01-first-analysis/">
          
  
  
    
  
  Tutorials

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../ontology/meta-loop/">
          
  
  
    
  
  Advanced Topics

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../development/index.md">
          
  
  
    
  
  Development

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../phase1-domain-context/">
          
  
  
    
  
  VDAD Process

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/reference/">
          
  
  
    
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../about/limitations/">
          
  
  
    
  
  About

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="RepoQ - Semantic Meta-Quality Loop" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="RepoQ - Semantic Meta-Quality Loop">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    RepoQ - Semantic Meta-Quality Loop
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/Repo-Q/repoq" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Repo-Q/repoq
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/quickstart/">
<span class="md-ellipsis">
    Quick Start
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    User Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/usage/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/commands/">
<span class="md-ellipsis">
    CLI Commands
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/workflows/">
<span class="md-ellipsis">
    Workflows
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/trs-framework/">
<span class="md-ellipsis">
    TRS Framework
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/rdf-export/">
<span class="md-ellipsis">
    RDF Export
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/baml-agent/">
<span class="md-ellipsis">
    BAML AI Agent
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/analyzer-pipeline/">
<span class="md-ellipsis">
    Analyzer Pipeline
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/stratification-guard/">
<span class="md-ellipsis">
    Stratification Guard
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Tutorials
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/01-first-analysis/">
<span class="md-ellipsis">
    First Analysis
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/02-custom-analyzer/">
<span class="md-ellipsis">
    Custom Analyzer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/03-ci-cd-integration/">
<span class="md-ellipsis">
    CI/CD Integration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/04-advanced-filtering/">
<span class="md-ellipsis">
    Advanced Filtering
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/05-rdf-queries/">
<span class="md-ellipsis">
    RDF Queries
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/06-ai-agent-config/">
<span class="md-ellipsis">
    AI Agent Configuration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Advanced Topics
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/meta-loop/">
<span class="md-ellipsis">
    Meta-Quality Loop
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/intelligence/">
<span class="md-ellipsis">
    Ontological Intelligence
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Development
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/index.md">
<span class="md-ellipsis">
    Development Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/uv-setup/">
<span class="md-ellipsis">
    uv Setup Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/CONTRIBUTING.md">
<span class="md-ellipsis">
    Contributing Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/testing.md">
<span class="md-ellipsis">
    Testing Strategy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/mathematical-proof-quality-monotonicity/">
<span class="md-ellipsis">
    Mathematical Proof (Quality Monotonicity)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/formal-foundations-complete/">
<span class="md-ellipsis">
    Formal Foundations
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/formal-diagrams/">
<span class="md-ellipsis">
    Formal Diagrams
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/quality-loop-roadmap/">
<span class="md-ellipsis">
    Quality Loop Roadmap
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/tmp-artifacts-inventory/">
<span class="md-ellipsis">
    tmp/ Artifacts Inventory
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-ellipsis">
    VDAD Process
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            VDAD Process
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../phase1-domain-context/">
<span class="md-ellipsis">
    Phase 1 - Domain Context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase1-stakeholders/">
<span class="md-ellipsis">
    Phase 1 - Stakeholders
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase2-value-register/">
<span class="md-ellipsis">
    Phase 2 - Value Register
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase3-requirements/">
<span class="md-ellipsis">
    Phase 3 - Requirements
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase4-architecture-overview/">
<span class="md-ellipsis">
    Phase 4 - Architecture Overview
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Phase 4 - C4 Diagrams
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Phase 4 - C4 Diagrams
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-1-system-context-diagram">
<span class="md-ellipsis">
      Level 1: System Context Diagram
    </span>
</a>
<nav aria-label="Level 1: System Context Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-relationships">
<span class="md-ellipsis">
      Key Relationships
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-2-container-diagram">
<span class="md-ellipsis">
      Level 2: Container Diagram
    </span>
</a>
<nav aria-label="Level 2: Container Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_1">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_1">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-responsibilities">
<span class="md-ellipsis">
      Container Responsibilities
    </span>
</a>
<nav aria-label="Container Responsibilities" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#cli-interface">
<span class="md-ellipsis">
      CLI Interface
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analysis-engine">
<span class="md-ellipsis">
      Analysis Engine
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gate-logic">
<span class="md-ellipsis">
      Gate Logic
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ontology-intelligence">
<span class="md-ellipsis">
      Ontology Intelligence
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#zag-module-zero-allowance-gate">
<span class="md-ellipsis">
      ZAG Module (Zero-Allowance Gate)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#any2math-bridge">
<span class="md-ellipsis">
      Any2Math Bridge
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vc-generator">
<span class="md-ellipsis">
      VC Generator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ai-agent-optional">
<span class="md-ellipsis">
      AI Agent (Optional)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metric-cache">
<span class="md-ellipsis">
      Metric Cache
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#knowledge-base-rdf-triplestore">
<span class="md-ellipsis">
      Knowledge Base (RDF TripleStore)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#certificate-store">
<span class="md-ellipsis">
      Certificate Store
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-3-component-diagram-analysis-engine">
<span class="md-ellipsis">
      Level 3: Component Diagram (Analysis Engine)
    </span>
</a>
<nav aria-label="Level 3: Component Diagram (Analysis Engine)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_2">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_2">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-details">
<span class="md-ellipsis">
      Component Details
    </span>
</a>
<nav aria-label="Component Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#analysisorchestrator">
<span class="md-ellipsis">
      AnalysisOrchestrator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diffanalyzer">
<span class="md-ellipsis">
      DiffAnalyzer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#incrementalanalyzer">
<span class="md-ellipsis">
      IncrementalAnalyzer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cachemanager">
<span class="md-ellipsis">
      CacheManager
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complexitycalculator">
<span class="md-ellipsis">
      ComplexityCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hotspotcalculator">
<span class="md-ellipsis">
      HotspotCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#todocalculator">
<span class="md-ellipsis">
      TodoCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#coveragecalculator">
<span class="md-ellipsis">
      CoverageCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#astnormalizer">
<span class="md-ellipsis">
      ASTNormalizer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ontologyingestor">
<span class="md-ellipsis">
      OntologyIngestor
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-3-component-diagram-gate-logic">
<span class="md-ellipsis">
      Level 3: Component Diagram (Gate Logic)
    </span>
</a>
<nav aria-label="Level 3: Component Diagram (Gate Logic)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_3">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_3">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-details_1">
<span class="md-ellipsis">
      Component Details
    </span>
</a>
<nav aria-label="Component Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gateevaluator">
<span class="md-ellipsis">
      GateEvaluator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#qualitycalculator">
<span class="md-ellipsis">
      QualityCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardconstraintchecker">
<span class="md-ellipsis">
      HardConstraintChecker
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pcqcalculator">
<span class="md-ellipsis">
      PCQCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pcewitnessgenerator">
<span class="md-ellipsis">
      PCEWitnessGenerator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exemptionmanager">
<span class="md-ellipsis">
      ExemptionManager
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verdictformatter">
<span class="md-ellipsis">
      VerdictFormatter
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deployment-view">
<span class="md-ellipsis">
      Deployment View
    </span>
</a>
<nav aria-label="Deployment View" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-development">
<span class="md-ellipsis">
      Local Development
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cicd-github-actions">
<span class="md-ellipsis">
      CI/CD (GitHub Actions)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#success-criteria">
<span class="md-ellipsis">
      Success Criteria
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase4-adrs/">
<span class="md-ellipsis">
    Phase 4 - ADRs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase4-nfr-realization/">
<span class="md-ellipsis">
    Phase 4 - NFR Realization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase4-baml-agent/">
<span class="md-ellipsis">
    Phase 4 - BAML Agent
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/reference/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    About
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            About
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/limitations/">
<span class="md-ellipsis">
    Current Limitations
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-1-system-context-diagram">
<span class="md-ellipsis">
      Level 1: System Context Diagram
    </span>
</a>
<nav aria-label="Level 1: System Context Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-relationships">
<span class="md-ellipsis">
      Key Relationships
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-2-container-diagram">
<span class="md-ellipsis">
      Level 2: Container Diagram
    </span>
</a>
<nav aria-label="Level 2: Container Diagram" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_1">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_1">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-responsibilities">
<span class="md-ellipsis">
      Container Responsibilities
    </span>
</a>
<nav aria-label="Container Responsibilities" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#cli-interface">
<span class="md-ellipsis">
      CLI Interface
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analysis-engine">
<span class="md-ellipsis">
      Analysis Engine
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gate-logic">
<span class="md-ellipsis">
      Gate Logic
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ontology-intelligence">
<span class="md-ellipsis">
      Ontology Intelligence
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#zag-module-zero-allowance-gate">
<span class="md-ellipsis">
      ZAG Module (Zero-Allowance Gate)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#any2math-bridge">
<span class="md-ellipsis">
      Any2Math Bridge
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vc-generator">
<span class="md-ellipsis">
      VC Generator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ai-agent-optional">
<span class="md-ellipsis">
      AI Agent (Optional)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metric-cache">
<span class="md-ellipsis">
      Metric Cache
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#knowledge-base-rdf-triplestore">
<span class="md-ellipsis">
      Knowledge Base (RDF TripleStore)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#certificate-store">
<span class="md-ellipsis">
      Certificate Store
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-3-component-diagram-analysis-engine">
<span class="md-ellipsis">
      Level 3: Component Diagram (Analysis Engine)
    </span>
</a>
<nav aria-label="Level 3: Component Diagram (Analysis Engine)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_2">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_2">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-details">
<span class="md-ellipsis">
      Component Details
    </span>
</a>
<nav aria-label="Component Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#analysisorchestrator">
<span class="md-ellipsis">
      AnalysisOrchestrator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diffanalyzer">
<span class="md-ellipsis">
      DiffAnalyzer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#incrementalanalyzer">
<span class="md-ellipsis">
      IncrementalAnalyzer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cachemanager">
<span class="md-ellipsis">
      CacheManager
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complexitycalculator">
<span class="md-ellipsis">
      ComplexityCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hotspotcalculator">
<span class="md-ellipsis">
      HotspotCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#todocalculator">
<span class="md-ellipsis">
      TodoCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#coveragecalculator">
<span class="md-ellipsis">
      CoverageCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#astnormalizer">
<span class="md-ellipsis">
      ASTNormalizer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ontologyingestor">
<span class="md-ellipsis">
      OntologyIngestor
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#level-3-component-diagram-gate-logic">
<span class="md-ellipsis">
      Level 3: Component Diagram (Gate Logic)
    </span>
</a>
<nav aria-label="Level 3: Component Diagram (Gate Logic)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#purpose_3">
<span class="md-ellipsis">
      Purpose
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram_3">
<span class="md-ellipsis">
      Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#component-details_1">
<span class="md-ellipsis">
      Component Details
    </span>
</a>
<nav aria-label="Component Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gateevaluator">
<span class="md-ellipsis">
      GateEvaluator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#qualitycalculator">
<span class="md-ellipsis">
      QualityCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardconstraintchecker">
<span class="md-ellipsis">
      HardConstraintChecker
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pcqcalculator">
<span class="md-ellipsis">
      PCQCalculator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pcewitnessgenerator">
<span class="md-ellipsis">
      PCEWitnessGenerator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exemptionmanager">
<span class="md-ellipsis">
      ExemptionManager
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verdictformatter">
<span class="md-ellipsis">
      VerdictFormatter
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deployment-view">
<span class="md-ellipsis">
      Deployment View
    </span>
</a>
<nav aria-label="Deployment View" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-development">
<span class="md-ellipsis">
      Local Development
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cicd-github-actions">
<span class="md-ellipsis">
      CI/CD (GitHub Actions)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#success-criteria">
<span class="md-ellipsis">
      Success Criteria
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/Repo-Q/repoq/edit/main/docs/vdad/phase4-c4-diagrams.md" rel="edit" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/Repo-Q/repoq/raw/main/docs/vdad/phase4-c4-diagrams.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"></path></svg>
</a>
<h1 id="vdad-phase-4-c4-architecture-diagrams">VDAD Phase 4: C4 Architecture Diagrams<a class="headerlink" href="#vdad-phase-4-c4-architecture-diagrams" title="Permanent link">¶</a></h1>
<p><strong>Status</strong>: ✅ ACTIVE<br/>
<strong>Model</strong>: C4 Model by Simon Brown (<a href="https://c4model.com">https://c4model.com</a>)<br/>
<strong>Created</strong>: 2025-10-21<br/>
<strong>Last Updated</strong>: 2025-10-21</p>
<hr/>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>This document presents the <strong>C4 architecture diagrams</strong> for RepoQ using the C4 Model:
- <strong>Level 1 (Context)</strong>: System context — RepoQ + external actors
- <strong>Level 2 (Container)</strong>: Major components + data flows
- <strong>Level 3 (Component)</strong>: Internal structure of key containers</p>
<p>The C4 Model provides a hierarchical view of the system, from high-level context to detailed component interactions.</p>
<hr/>
<h2 id="level-1-system-context-diagram">Level 1: System Context Diagram<a class="headerlink" href="#level-1-system-context-diagram" title="Permanent link">¶</a></h2>
<h3 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">¶</a></h3>
<p>Shows RepoQ in its operating environment with external actors and systems.</p>
<h3 id="diagram">Diagram<a class="headerlink" href="#diagram" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>C4Context
    title System Context Diagram for RepoQ Quality Gate

    Person(dev, "Developer", "Writes code, opens PRs, reviews quality reports")
    Person(lead, "Team Lead", "Sets quality policies, reviews certificates, tracks metrics")
    Person(devops, "DevOps Engineer", "Integrates RepoQ into CI/CD, monitors pipeline")

    System(repoq, "RepoQ Quality Gate", "Local-first code quality analyzer with formal guarantees, ontological intelligence, and gaming-resistant metrics")

    System_Ext(git, "Git Repository", "Version control system (GitHub, GitLab, local)")
    System_Ext(ci, "CI/CD System", "GitHub Actions, GitLab CI, Jenkins")
    System_Ext(llm, "LLM Provider", "OpenAI GPT-4 (optional, opt-in only)")
    System_Ext(lean, "Lean Prover", "Lean 4 mechanized proof assistant (optional)")
    System_Ext(registry, "Certificate Registry", "W3C Verifiable Credentials storage (local JSON or remote)")

    Rel(dev, repoq, "Runs quality gate locally", "CLI: repoq gate --base main --head HEAD")
    Rel(lead, repoq, "Configures quality policy", "YAML: .github/quality-policy.yml")
    Rel(devops, ci, "Sets up CI pipeline", "GitHub Actions workflow")

    Rel(repoq, git, "Reads commit history, diffs", "GitPython")
    Rel(ci, repoq, "Runs on PR", "pip install repoq &amp;&amp; repoq gate")
    Rel(repoq, llm, "Sends semantic analysis requests", "BAML client (optional)")
    Rel(repoq, lean, "Verifies TRS proofs", "Subprocess (optional)")
    Rel(repoq, registry, "Stores quality certificates", "JSON-LD + ECDSA signature")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="2")</code></pre>
<h3 id="key-relationships">Key Relationships<a class="headerlink" href="#key-relationships" title="Permanent link">¶</a></h3>
<ol>
<li><strong>Developer ↔ RepoQ</strong></li>
<li><strong>Trigger</strong>: <code>repoq gate --base main --head HEAD</code> (local CLI)</li>
<li><strong>Output</strong>: Quality report (Q-score, ΔQ, PCQ, PCE witness), VC certificate</li>
<li>
<p><strong>Frequency</strong>: Per commit or PR</p>
</li>
<li>
<p><strong>Team Lead ↔ RepoQ</strong></p>
</li>
<li><strong>Action</strong>: Configure <code>.github/quality-policy.yml</code> (thresholds, weights, exemptions)</li>
<li><strong>Feedback</strong>: Review gate decisions, certificate trail</li>
<li>
<p><strong>Frequency</strong>: Weekly policy updates</p>
</li>
<li>
<p><strong>CI/CD ↔ RepoQ</strong></p>
</li>
<li><strong>Integration</strong>: GitHub Actions workflow runs <code>repoq gate</code> on every PR</li>
<li><strong>Decision</strong>: Merge blocked if gate fails (exit code 1)</li>
<li>
<p><strong>Artifacts</strong>: Certificates published as workflow artifacts</p>
</li>
<li>
<p><strong>RepoQ ↔ Git</strong></p>
</li>
<li><strong>Read</strong>: Commit history, diffs, file contents, blame info</li>
<li>
<p><strong>Write</strong>: None (read-only analysis)</p>
</li>
<li>
<p><strong>RepoQ ↔ LLM</strong> (Optional, Opt-In Only)</p>
</li>
<li><strong>Trigger</strong>: User enables <code>ai_agent.enabled: true</code> in policy</li>
<li><strong>Data sent</strong>: Code diffs, metrics (no credentials, no production secrets)</li>
<li><strong>Data received</strong>: Semantic analysis, improvement suggestions, anomaly detection</li>
<li>
<p><strong>Security</strong>: Explicit consent required, max 10 calls/analysis, 30sec timeout</p>
</li>
<li>
<p><strong>RepoQ ↔ Lean</strong> (Optional, For Formal Verification)</p>
</li>
<li><strong>Trigger</strong>: User enables <code>formal_verification: true</code> in policy</li>
<li><strong>Process</strong>: Subprocess call to <code>lean verify_trs.lean</code></li>
<li><strong>Output</strong>: Proof of TRS confluence/termination/idempotence</li>
<li>
<p><strong>Fallback</strong>: Skip if Lean not installed</p>
</li>
<li>
<p><strong>RepoQ ↔ Certificate Registry</strong></p>
</li>
<li><strong>Write</strong>: JSON-LD + ECDSA-signed VCs (quality certificates)</li>
<li><strong>Read</strong>: Past certificates for longitudinal analysis</li>
<li><strong>Storage</strong>: Local <code>.repoq/certificates/</code> or remote endpoint</li>
</ol>
<hr/>
<h2 id="level-2-container-diagram">Level 2: Container Diagram<a class="headerlink" href="#level-2-container-diagram" title="Permanent link">¶</a></h2>
<h3 id="purpose_1">Purpose<a class="headerlink" href="#purpose_1" title="Permanent link">¶</a></h3>
<p>Shows major containers (applications/data stores) within RepoQ and their interactions.</p>
<h3 id="diagram_1">Diagram<a class="headerlink" href="#diagram_1" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>C4Container
    title Container Diagram for RepoQ Quality Gate

    Person(user, "User", "Developer/Team Lead")
    System_Ext(git, "Git Repository", "Source code, history")
    System_Ext(llm, "LLM Provider", "GPT-4 (optional)")
    System_Ext(lean, "Lean Prover", "Proof assistant")

    Container_Boundary(repoq, "RepoQ System") {
        Container(cli, "CLI Interface", "Python, Click", "Command-line interface for gate, verify, export, meta-self")

        Container(engine, "Analysis Engine", "Python", "Coordinates metric calculation, caching, incremental analysis")
        Container(gate, "Gate Logic", "Python", "Evaluates admission predicate, calculates Q/PCQ/PCE, generates verdict")
        Container(ontology, "Ontology Intelligence", "Python, RDFLib", "RDF triple store, SPARQL queries, pattern detection, semantic inference")
        Container(zag, "ZAG Module", "Python", "PCQ/PCE min-aggregator witness generation")
        Container(any2math, "Any2Math Bridge", "Python + Lean", "TRS-based AST normalization, deterministic canonicalization")
        Container(vc, "VC Generator", "Python, cryptography", "W3C Verifiable Credentials with ECDSA signatures")
        Container(ai, "AI Agent (Optional)", "Python, BAML", "Semantic analysis, explanations, improvement suggestions, anomaly detection")

        ContainerDb(cache, "Metric Cache", "LRU Cache", "SHA-based metric storage (file_sha + policy_version)")
        ContainerDb(kb, "Knowledge Base", "RDF TripleStore", "Code/C4/DDD ontologies, SPARQL endpoint")
        ContainerDb(certs, "Certificate Store", "JSON-LD Files", "Quality certificates with signatures")
    }

    Rel(user, cli, "Runs commands", "CLI: repoq gate, repoq verify")
    Rel(cli, engine, "Orchestrates analysis", "Python API")
    Rel(cli, gate, "Evaluates gate", "Python API")
    Rel(cli, ai, "Requests AI insights", "Python API (if enabled)")

    Rel(engine, git, "Reads diffs, history", "GitPython")
    Rel(engine, cache, "Reads/writes metrics", "In-memory + disk")
    Rel(engine, ontology, "Ingests code", "RDF triples")
    Rel(engine, any2math, "Normalizes AST", "Subprocess")

    Rel(gate, zag, "Calculates PCQ/PCE", "Python API")
    Rel(gate, vc, "Generates certificate", "Python API")

    Rel(ontology, kb, "Stores triples", "RDFLib API")
    Rel(ontology, kb, "Queries patterns", "SPARQL")

    Rel(any2math, lean, "Verifies proofs", "Subprocess (optional)")

    Rel(ai, llm, "Sends prompts", "BAML client (if enabled)")

    Rel(vc, certs, "Stores certificates", "JSON-LD files")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre>
<h3 id="container-responsibilities">Container Responsibilities<a class="headerlink" href="#container-responsibilities" title="Permanent link">¶</a></h3>
<h4 id="cli-interface">CLI Interface<a class="headerlink" href="#cli-interface" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+, Click 8.x</li>
<li><strong>Responsibility</strong>: Parse commands, load config, display output</li>
<li><strong>Commands</strong>: <code>gate</code>, <code>verify</code>, <code>export</code>, <code>meta-self</code>, <code>report</code></li>
<li><strong>Input</strong>: CLI args, <code>.github/quality-policy.yml</code></li>
<li><strong>Output</strong>: Formatted text, JSON, certificates</li>
<li><strong>Exit codes</strong>: 0 (PASS), 1 (FAIL), 2 (ERROR)</li>
</ul>
<h4 id="analysis-engine">Analysis Engine<a class="headerlink" href="#analysis-engine" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+, radon, coverage.py, GitPython</li>
<li><strong>Responsibility</strong>: Calculate base/head metrics, manage cache, incremental analysis</li>
<li><strong>Metrics</strong>: Complexity (McCabe), Hotspots (git log), TODOs (regex), Coverage (coverage.py)</li>
<li><strong>Optimization</strong>: SHA-based caching, LRU eviction, parallel file processing</li>
<li><strong>Performance</strong>: Target ≤2 min (P90) for &lt;1K files</li>
</ul>
<h4 id="gate-logic">Gate Logic<a class="headerlink" href="#gate-logic" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+</li>
<li><strong>Responsibility</strong>: Evaluate admission predicate, compute Q/ΔQ/PCQ, generate verdict</li>
<li><strong>Formula</strong>: <code>Q = Q_max - Σ(w_i * x_i)</code>, <code>Admission = H ∧ (ΔQ ≥ ε) ∧ (PCQ ≥ τ)</code></li>
<li><strong>Hard constraints</strong>: Test coverage ≥80%, TODO ≤100, Hotspots ≤20</li>
<li><strong>Output</strong>: PASS/FAIL + detailed metrics + PCE witness (if FAIL)</li>
</ul>
<h4 id="ontology-intelligence">Ontology Intelligence<a class="headerlink" href="#ontology-intelligence" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+, RDFLib 7.x, pySHACL 0.25.x</li>
<li><strong>Responsibility</strong>: RDF triple store, SPARQL queries, pattern detection</li>
<li><strong>Ontologies</strong>: O_Code (functions, classes, calls), O_C4 (components, dependencies), O_DDD (bounded contexts, aggregates)</li>
<li><strong>Patterns</strong>: MVC, Layered Architecture, Microservices, Plugin, Strategy</li>
<li><strong>Inference</strong>: Semantic relationships (e.g., "Controller depends on Model")</li>
<li><strong>Validation</strong>: SHACL shape validation</li>
</ul>
<h4 id="zag-module-zero-allowance-gate">ZAG Module (Zero-Allowance Gate)<a class="headerlink" href="#zag-module-zero-allowance-gate" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+</li>
<li><strong>Responsibility</strong>: PCQ min-aggregator, PCE k-repair witness generation</li>
<li><strong>Algorithm</strong>: PCQ = min{Q(M_i) for all modules i}, PCE = greedy k-min selection</li>
<li><strong>Guarantee</strong>: Gaming-resistant (no compensation, all modules ≥τ)</li>
<li><strong>Performance</strong>: O(n log n) for PCE witness</li>
<li><strong>Reference</strong>: <code>tmp/zag/</code> (partially implemented)</li>
</ul>
<h4 id="any2math-bridge">Any2Math Bridge<a class="headerlink" href="#any2math-bridge" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+ (AST), Lean 4 (proofs)</li>
<li><strong>Responsibility</strong>: TRS-based AST normalization, deterministic canonicalization</li>
<li><strong>Rules</strong>: Remove Pass, normalize var order, canonicalize binary ops, remove parens</li>
<li><strong>Verification</strong>: Lean subprocess checks confluence, termination, idempotence</li>
<li><strong>Fallback</strong>: Skip normalization if Lean unavailable</li>
<li><strong>Reference</strong>: <code>tmp/any2math/</code> (design complete, not integrated)</li>
</ul>
<h4 id="vc-generator">VC Generator<a class="headerlink" href="#vc-generator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+, cryptography 42.x (ECDSA)</li>
<li><strong>Responsibility</strong>: W3C Verifiable Credentials with ECDSA signatures</li>
<li><strong>Format</strong>: JSON-LD with <code>@context</code>, <code>credentialSubject</code>, <code>proof</code></li>
<li><strong>Signature</strong>: ECDSA secp256k1 (same as Bitcoin/Ethereum)</li>
<li><strong>Storage</strong>: <code>.repoq/certificates/&lt;commit_sha&gt;.json</code></li>
</ul>
<h4 id="ai-agent-optional">AI Agent (Optional)<a class="headerlink" href="#ai-agent-optional" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python 3.11+, BAML 0.x, OpenAI API</li>
<li><strong>Responsibility</strong>: Semantic analysis, explanations, suggestions, anomaly detection</li>
<li><strong>Functions</strong>: AnalyzePRContext, GenerateExplanation, SuggestImprovements, DetectAnomalies</li>
<li><strong>Security</strong>: Read-only, max 10 LLM calls, 30sec timeout, opt-in only</li>
<li><strong>Status</strong>: ⏸️ Planned (Phase 5)</li>
</ul>
<h4 id="metric-cache">Metric Cache<a class="headerlink" href="#metric-cache" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Python dict + diskcache library</li>
<li><strong>Structure</strong>: <code>{file_sha}_{policy_version}_{repoq_version} → metrics</code></li>
<li><strong>Eviction</strong>: LRU (least recently used), max 10K entries</li>
<li><strong>Invalidation</strong>: Policy version change triggers full cache clear</li>
<li><strong>Persistence</strong>: Disk-backed (<code>.repoq/cache/</code>)</li>
</ul>
<h4 id="knowledge-base-rdf-triplestore">Knowledge Base (RDF TripleStore)<a class="headerlink" href="#knowledge-base-rdf-triplestore" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: RDFLib 7.x (in-memory + Turtle serialization)</li>
<li><strong>Schema</strong>: Three ontologies (Code, C4, DDD) with shared vocabulary</li>
<li><strong>Query Language</strong>: SPARQL 1.1</li>
<li><strong>Persistence</strong>: <code>.repoq/ontology.ttl</code> (Turtle format)</li>
<li><strong>Performance</strong>: For large repos, consider Oxigraph (C++ backend)</li>
</ul>
<h4 id="certificate-store">Certificate Store<a class="headerlink" href="#certificate-store" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: JSON-LD files on disk</li>
<li><strong>Location</strong>: <code>.repoq/certificates/</code></li>
<li><strong>Filename</strong>: <code>&lt;commit_sha&gt;.json</code> (e.g., <code>87b51c0a.json</code>)</li>
<li><strong>Indexing</strong>: SQLite index for fast lookup (optional)</li>
<li><strong>Retention</strong>: Configurable (default: keep all)</li>
</ul>
<hr/>
<h2 id="level-3-component-diagram-analysis-engine">Level 3: Component Diagram (Analysis Engine)<a class="headerlink" href="#level-3-component-diagram-analysis-engine" title="Permanent link">¶</a></h2>
<h3 id="purpose_2">Purpose<a class="headerlink" href="#purpose_2" title="Permanent link">¶</a></h3>
<p>Shows internal components of the Analysis Engine (most complex container).</p>
<h3 id="diagram_2">Diagram<a class="headerlink" href="#diagram_2" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>C4Component
    title Component Diagram: Analysis Engine

    Container_Boundary(engine, "Analysis Engine") {
        Component(orchestrator, "AnalysisOrchestrator", "Python", "Coordinates full analysis workflow")
        Component(diff_analyzer, "DiffAnalyzer", "Python, GitPython", "Parses git diff, identifies changed files")
        Component(incremental, "IncrementalAnalyzer", "Python", "Decides which files need re-analysis")
        Component(cache_mgr, "CacheManager", "Python, diskcache", "Manages SHA-based metric cache")

        Component(complexity_calc, "ComplexityCalculator", "Python, radon", "McCabe cyclomatic complexity")
        Component(hotspot_calc, "HotspotCalculator", "Python, GitPython", "Git log analysis (commits per file)")
        Component(todo_calc, "TodoCalculator", "Python, regex", "Counts TODO/FIXME/HACK comments")
        Component(coverage_calc, "CoverageCalculator", "Python, coverage.py", "Test coverage percentage")

        Component(normalizer, "ASTNormalizer", "Python, ast", "Deterministic AST canonicalization")
        Component(ontology_ingestor, "OntologyIngestor", "Python, RDFLib", "Converts AST to RDF triples")
    }

    ContainerDb_Ext(cache, "Metric Cache", "LRU Cache")
    ContainerDb_Ext(kb, "Knowledge Base", "RDF TripleStore")
    Container_Ext(any2math, "Any2Math Bridge", "Lean")
    System_Ext(git, "Git Repository", "GitPython")

    Rel(orchestrator, diff_analyzer, "Get changed files", "Python API")
    Rel(diff_analyzer, git, "Read diff", "GitPython")

    Rel(orchestrator, incremental, "Filter files", "Python API")
    Rel(incremental, cache_mgr, "Check cache", "Python API")
    Rel(cache_mgr, cache, "Read/write", "diskcache")

    Rel(orchestrator, complexity_calc, "Calculate complexity", "Python API")
    Rel(orchestrator, hotspot_calc, "Calculate hotspots", "Python API")
    Rel(orchestrator, todo_calc, "Count TODOs", "Python API")
    Rel(orchestrator, coverage_calc, "Calculate coverage", "Python API")

    Rel(complexity_calc, normalizer, "Normalize AST", "Python API")
    Rel(normalizer, any2math, "Verify normalization", "Subprocess (optional)")

    Rel(orchestrator, ontology_ingestor, "Ingest code", "Python API")
    Rel(ontology_ingestor, kb, "Store triples", "RDFLib")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre>
<h3 id="component-details">Component Details<a class="headerlink" href="#component-details" title="Permanent link">¶</a></h3>
<h4 id="analysisorchestrator">AnalysisOrchestrator<a class="headerlink" href="#analysisorchestrator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Main entry point, coordinates all analysis steps</li>
<li><strong>Flow</strong>:</li>
<li>Load policy from YAML</li>
<li>Get changed files (DiffAnalyzer)</li>
<li>Filter cached files (IncrementalAnalyzer)</li>
<li>Calculate metrics in parallel (Complexity, Hotspots, TODOs, Coverage)</li>
<li>Normalize ASTs (ASTNormalizer, optional)</li>
<li>Ingest into ontology (OntologyIngestor, optional)</li>
<li>Return aggregated metrics</li>
<li><strong>Parallelization</strong>: ThreadPoolExecutor for file-level parallelism</li>
</ul>
<h4 id="diffanalyzer">DiffAnalyzer<a class="headerlink" href="#diffanalyzer" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Parse git diff, extract changed files</li>
<li><strong>Algorithm</strong>:
  <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_changed_files</span><span class="p">(</span><span class="n">base_sha</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">head_sha</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="n">repo</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="n">diff</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">base_sha</span><span class="p">,</span> <span class="n">head_sha</span><span class="p">,</span> <span class="n">name_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="k">return</span> <span class="n">diff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div></li>
</ul>
<h4 id="incrementalanalyzer">IncrementalAnalyzer<a class="headerlink" href="#incrementalanalyzer" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Decide which files need re-analysis</li>
<li><strong>Logic</strong>:
  <div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">needs_analysis</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_sha</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">policy_version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>    <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">file_sha</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">policy_version</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">REPOQ_VERSION</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="k">return</span> <span class="n">cache_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cache</span>
</span></code></pre></div></li>
</ul>
<h4 id="cachemanager">CacheManager<a class="headerlink" href="#cachemanager" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: diskcache library (disk-backed LRU)</li>
<li><strong>Structure</strong>: <code>{cache_key → {complexity, hotspots, todos, coverage}}</code></li>
<li><strong>Eviction</strong>: LRU, max 10K entries or 1GB disk space</li>
<li><strong>Invalidation</strong>: Policy version change → clear all</li>
</ul>
<h4 id="complexitycalculator">ComplexityCalculator<a class="headerlink" href="#complexitycalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: radon library (McCabe cyclomatic complexity)</li>
<li><strong>Formula</strong>: <code>CC(func) = #edges - #nodes + 2</code></li>
<li><strong>Aggregation</strong>: <code>complexity(file) = max{CC(func) for all funcs}</code></li>
<li><strong>Normalization</strong>: If Any2Math enabled, normalize AST first</li>
</ul>
<h4 id="hotspotcalculator">HotspotCalculator<a class="headerlink" href="#hotspotcalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: GitPython (git log analysis)</li>
<li><strong>Algorithm</strong>:
  <div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">hotspots</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">since</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"90 days"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="n">repo</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">commits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">iter_commits</span><span class="p">(</span><span class="n">paths</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="n">since</span><span class="p">))</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">commits</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Threshold</strong>: &gt;20 commits/90 days = hotspot</li>
</ul>
<h4 id="todocalculator">TodoCalculator<a class="headerlink" href="#todocalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: Regex matching</li>
<li><strong>Patterns</strong>: <code>TODO|FIXME|HACK|XXX|REFACTOR</code></li>
<li><strong>Aggregation</strong>: <code>todos(file) = sum(matches per line)</code></li>
<li><strong>Exemptions</strong>: Can whitelist specific files in policy</li>
</ul>
<h4 id="coveragecalculator">CoverageCalculator<a class="headerlink" href="#coveragecalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Technology</strong>: coverage.py (pytest-cov integration)</li>
<li><strong>Process</strong>:</li>
<li>Run tests with <code>pytest --cov=. --cov-report=json</code></li>
<li>Parse <code>coverage.json</code></li>
<li>Extract per-file coverage</li>
<li><strong>Aggregation</strong>: <code>coverage_gap(file) = 100 - coverage_percent</code></li>
</ul>
<h4 id="astnormalizer">ASTNormalizer<a class="headerlink" href="#astnormalizer" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Deterministic AST canonicalization (Any2Math)</li>
<li><strong>Rules</strong>: See <code>phase4-architecture-overview.md</code> §2.2.5</li>
<li><strong>Verification</strong>: Optional Lean subprocess to check TRS properties</li>
<li><strong>Fallback</strong>: If Lean unavailable, skip verification (trust normalization)</li>
</ul>
<h4 id="ontologyingestor">OntologyIngestor<a class="headerlink" href="#ontologyingestor" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Convert AST → RDF triples</li>
<li><strong>Triples</strong>:</li>
<li><code>&lt;func:my_function&gt; rdf:type code:Function</code></li>
<li><code>&lt;func:my_function&gt; code:name "my_function"</code></li>
<li><code>&lt;func:my_function&gt; code:complexity "8"^^xsd:integer</code></li>
<li><code>&lt;func:my_function&gt; code:calls &lt;func:helper&gt;</code></li>
<li><strong>Ontology</strong>: Uses <code>field33.context.jsonld</code> vocabulary</li>
</ul>
<hr/>
<h2 id="level-3-component-diagram-gate-logic">Level 3: Component Diagram (Gate Logic)<a class="headerlink" href="#level-3-component-diagram-gate-logic" title="Permanent link">¶</a></h2>
<h3 id="purpose_3">Purpose<a class="headerlink" href="#purpose_3" title="Permanent link">¶</a></h3>
<p>Shows internal components of the Gate Logic container.</p>
<h3 id="diagram_3">Diagram<a class="headerlink" href="#diagram_3" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>C4Component
    title Component Diagram: Gate Logic

    Container_Boundary(gate, "Gate Logic") {
        Component(gate_eval, "GateEvaluator", "Python", "Main admission predicate evaluator")
        Component(q_calc, "QualityCalculator", "Python", "Computes Q-score from metrics")
        Component(hard_checker, "HardConstraintChecker", "Python", "Validates hard constraints (H)")
        Component(pcq_calc, "PCQCalculator", "Python", "Min-aggregator for module quality")
        Component(pce_gen, "PCEWitnessGenerator", "Python", "Greedy k-repair witness")
        Component(exemption_mgr, "ExemptionManager", "Python", "Applies policy exemptions")
        Component(verdict_formatter, "VerdictFormatter", "Python", "Formats PASS/FAIL output")
    }

    Container_Ext(zag, "ZAG Module", "PCQ/PCE algorithms")
    Container_Ext(vc, "VC Generator", "Certificates")

    Rel(gate_eval, q_calc, "Calculate Q(base), Q(head)", "Python API")
    Rel(gate_eval, hard_checker, "Check hard constraints", "Python API")
    Rel(gate_eval, pcq_calc, "Calculate PCQ", "Python API")
    Rel(gate_eval, exemption_mgr, "Apply exemptions", "Python API")

    Rel(q_calc, exemption_mgr, "Get exempted files", "Python API")

    Rel(pcq_calc, zag, "Delegate to ZAG", "Python API")
    Rel(gate_eval, pce_gen, "Generate witness (if FAIL)", "Python API")
    Rel(pce_gen, zag, "Delegate to ZAG", "Python API")

    Rel(gate_eval, verdict_formatter, "Format output", "Python API")
    Rel(gate_eval, vc, "Generate certificate", "Python API")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre>
<h3 id="component-details_1">Component Details<a class="headerlink" href="#component-details_1" title="Permanent link">¶</a></h3>
<h4 id="gateevaluator">GateEvaluator<a class="headerlink" href="#gateevaluator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Main orchestrator for gate evaluation</li>
<li><strong>Algorithm</strong>:
  <div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">evaluate_gate</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span> <span class="n">head</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span> <span class="n">policy</span><span class="p">:</span> <span class="n">Policy</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Verdict</span><span class="p">:</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="n">q_base</span> <span class="o">=</span> <span class="n">q_calc</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="n">q_head</span> <span class="o">=</span> <span class="n">q_calc</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>    <span class="n">delta_q</span> <span class="o">=</span> <span class="n">q_head</span> <span class="o">-</span> <span class="n">q_base</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="n">hard</span> <span class="o">=</span> <span class="n">hard_checker</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="n">pcq</span> <span class="o">=</span> <span class="n">pcq_calc</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="n">passed</span> <span class="o">=</span> <span class="n">hard</span> <span class="ow">and</span> <span class="p">(</span><span class="n">delta_q</span> <span class="o">&gt;=</span> <span class="n">policy</span><span class="o">.</span><span class="n">epsilon</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">pcq</span> <span class="o">&gt;=</span> <span class="n">policy</span><span class="o">.</span><span class="n">tau</span><span class="p">)</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>    <span class="n">witness</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">passed</span> <span class="k">else</span> <span class="n">pce_gen</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">policy</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="n">verdict</span> <span class="o">=</span> <span class="n">Verdict</span><span class="p">(</span>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>        <span class="n">passed</span><span class="o">=</span><span class="n">passed</span><span class="p">,</span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>        <span class="n">q_base</span><span class="o">=</span><span class="n">q_base</span><span class="p">,</span>
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>        <span class="n">q_head</span><span class="o">=</span><span class="n">q_head</span><span class="p">,</span>
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>        <span class="n">delta_q</span><span class="o">=</span><span class="n">delta_q</span><span class="p">,</span>
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>        <span class="n">pcq</span><span class="o">=</span><span class="n">pcq</span><span class="p">,</span>
</span><span id="__span-3-19"><a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>        <span class="n">witness</span><span class="o">=</span><span class="n">witness</span>
</span><span id="__span-3-20"><a href="#__codelineno-3-20" id="__codelineno-3-20" name="__codelineno-3-20"></a>    <span class="p">)</span>
</span><span id="__span-3-21"><a href="#__codelineno-3-21" id="__codelineno-3-21" name="__codelineno-3-21"></a>
</span><span id="__span-3-22"><a href="#__codelineno-3-22" id="__codelineno-3-22" name="__codelineno-3-22"></a>    <span class="k">return</span> <span class="n">verdict_formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">verdict</span><span class="p">)</span>
</span></code></pre></div></li>
</ul>
<h4 id="qualitycalculator">QualityCalculator<a class="headerlink" href="#qualitycalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Formula</strong>: <code>Q = Q_max - Σ(w_i * x_i)</code></li>
<li><strong>Inputs</strong>: <code>x = [complexity, hotspots, todos, coverage_gap]</code>, <code>w = [20, 30, 10, 40]</code></li>
<li><strong>Exemptions</strong>: Skip exempted files before aggregation</li>
</ul>
<h4 id="hardconstraintchecker">HardConstraintChecker<a class="headerlink" href="#hardconstraintchecker" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Constraints</strong>:</li>
<li><code>test_coverage ≥ 80%</code></li>
<li><code>todo_count ≤ 100</code></li>
<li><code>hotspot_threshold ≤ 20</code></li>
<li><strong>Output</strong>: Boolean (all constraints passed?)</li>
</ul>
<h4 id="pcqcalculator">PCQCalculator<a class="headerlink" href="#pcqcalculator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Formula</strong>: <code>PCQ(S) = min{Q(M_i) for all modules i}</code></li>
<li><strong>Module Definition</strong>: Directory-level or layer-level (configurable)</li>
<li><strong>Gaming Resistance</strong>: No compensation (one bad module → PCQ fails)</li>
</ul>
<h4 id="pcewitnessgenerator">PCEWitnessGenerator<a class="headerlink" href="#pcewitnessgenerator" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Algorithm</strong>: Greedy k-min selection</li>
<li><strong>Input</strong>: Module qualities <code>[Q(M_1), Q(M_2), ..., Q(M_n)]</code></li>
<li><strong>Output</strong>: k lowest modules (e.g., k=3 for actionable feedback)</li>
<li><strong>Complexity</strong>: O(n log n) (heapq.nsmallest)</li>
</ul>
<h4 id="exemptionmanager">ExemptionManager<a class="headerlink" href="#exemptionmanager" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Responsibility</strong>: Load exemptions from policy, apply to metrics</li>
<li><strong>Types</strong>:</li>
<li><strong>Complexity exemptions</strong>: Allow higher complexity for specific files (e.g., algorithms)</li>
<li><strong>Legacy exemptions</strong>: Temporary exemptions with expiry dates</li>
<li><strong>Validation</strong>: Warn if exemption expired</li>
</ul>
<h4 id="verdictformatter">VerdictFormatter<a class="headerlink" href="#verdictformatter" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Formats</strong>: Text (CLI), JSON (CI/CD), Markdown (reports)</li>
<li><strong>Output</strong>:
  <div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>✅ PASS: Quality gate satisfied
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>Q(base) = 75.2
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>Q(head) = 77.8
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>ΔQ = +2.6 (threshold: ε=0.3)
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>PCQ = 0.82 (threshold: τ=0.8)
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>Certificate: .repoq/certificates/87b51c0a.json
</span></code></pre></div></li>
</ul>
<hr/>
<h2 id="deployment-view">Deployment View<a class="headerlink" href="#deployment-view" title="Permanent link">¶</a></h2>
<h3 id="local-development">Local Development<a class="headerlink" href="#local-development" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>┌─────────────────────────────────────────┐
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>│         Developer Workstation           │
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>│                                         │
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>│  │  Git Repository (local clone)    │ │
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>│              ▲                          │
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>│              │ git diff                 │
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>│  ┌───────────┴───────────────────────┐ │
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>│  │  RepoQ (pip install repoq)        │ │
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>│  │  - Analysis Engine                │ │
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>│  │  - Gate Logic                     │ │
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>│  │  - Ontology Intelligence          │ │
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>│  │  - Metric Cache (~/.repoq/cache/) │ │
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>│  │  - Certificate Store              │ │
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>│              │                          │
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>│              ▼ exit code                │
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-5-20"><a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>│  │  Terminal (PASS/FAIL output)     │ │
</span><span id="__span-5-21"><a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-5-22"><a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>└─────────────────────────────────────────┘
</span></code></pre></div>
<h3 id="cicd-github-actions">CI/CD (GitHub Actions)<a class="headerlink" href="#cicd-github-actions" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>┌─────────────────────────────────────────┐
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>│        GitHub Actions Runner            │
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>│                                         │
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>│  │  Checkout PR code                 │ │
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>│              ▼                          │
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>│  │  Setup Python 3.11                │ │
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>│              ▼                          │
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>│  │  pip install repoq                │ │
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>│              ▼                          │
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>│  │  repoq gate --base $BASE --head . │ │
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>│  │  - Reads .github/quality-policy.yml│ │
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>│  │  - Analyzes PR diff               │ │
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a>│  │  - Generates certificate          │ │
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a>│              ▼                          │
</span><span id="__span-6-23"><a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-24"><a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a>│  │  Upload certificate as artifact   │ │
</span><span id="__span-6-25"><a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-26"><a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a>│              ▼                          │
</span><span id="__span-6-27"><a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a>│  ┌───────────────────────────────────┐ │
</span><span id="__span-6-28"><a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a>│  │  Set PR status (✅ PASS / ❌ FAIL)│ │
</span><span id="__span-6-29"><a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a>│  └───────────────────────────────────┘ │
</span><span id="__span-6-30"><a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a>└─────────────────────────────────────────┘
</span></code></pre></div>
<hr/>
<h2 id="success-criteria">Success Criteria<a class="headerlink" href="#success-criteria" title="Permanent link">¶</a></h2>
<ul>
<li>✅ <strong>Level 1 (Context)</strong>: System context diagram with 6 external actors/systems</li>
<li>✅ <strong>Level 2 (Container)</strong>: 9 containers + 3 data stores with clear responsibilities</li>
<li>✅ <strong>Level 3 (Component)</strong>: 2 detailed component diagrams (Analysis Engine, Gate Logic)</li>
<li>✅ <strong>Deployment view</strong>: Local + CI/CD deployment diagrams</li>
<li>✅ <strong>All diagrams</strong>: Mermaid format (git-friendly, no binary files)</li>
</ul>
<hr/>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">¶</a></h2>
<ol>
<li>Simon Brown (2020). <em>The C4 Model for Visualising Software Architecture</em>. <a href="https://c4model.com">c4model.com</a></li>
<li>Mermaid Documentation (2024). <em>C4 Diagrams</em>. <a href="https://mermaid.js.org/syntax/c4.html">mermaid.js.org/syntax/c4.html</a></li>
<li>RepoQ Project (2025). <em>Phase 4: Architecture Overview</em>. <code>docs/vdad/phase4-architecture-overview.md</code></li>
<li>RepoQ Project (2025). <em>Phase 3: Requirements</em>. <code>docs/vdad/phase3-requirements.md</code></li>
</ol>
<hr/>
<p><strong>Document Status</strong>: ✅ COMPLETE<br/>
<strong>Review</strong>: Pending (validate diagrams with team)<br/>
<strong>Next Steps</strong>: ADR log, NFR realization, BAML spec in separate documents.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 RepoQ Contributors
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/Repo-Q/repoq" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://pypi.org/project/repoq/" rel="noopener" target="_blank" title="pypi.org">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.highlight", "search.share", "header.autohide", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
</body>
</html>